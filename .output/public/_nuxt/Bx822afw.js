import{r as h,z as D,j as v,o as e,w as c,b as u,c as s,i as R,F as m,d as y,t as o,h as b,a as n,C as L}from"./CQhMbuYm.js";import{$ as z,a as x,b as F,_ as O,c as M}from"./BklFbpMv.js";import{_ as A}from"./CoaxiW6z.js";import{_ as E}from"./D6JetA8M.js";import{_ as I}from"./D8yCJ5HV.js";import{_ as T}from"./B3zaNuK4.js";const q={class:"flex justify-between w-full items-center"},G={class:"text-xl font-bold text-primary"},H={key:0,class:"flex items-center justify-center pt-10 w-full"},J={key:1,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6"},K={class:"text-lg font-semibold"},Q={class:"space-y-4"},W={class:"flex justify-between"},X={class:"font-semibold"},Y={class:"flex justify-between"},Z={class:"font-semibold text-green-600"},ee={key:0},te={class:"space-y-1"},se={key:2,class:"w-full h-full"},ae=["src"],oe={key:3},le={key:0,class:"text-center text-gray-500 mt-10"},ne={key:1,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6"},de={key:4},re={key:0,class:"text-center text-gray-500 mt-10"},ce={key:1,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6"},ie={key:5,class:"text-center text-gray-500 mt-10"},_e={__name:"CommonRulesModal",props:{modelValue:Boolean,title:{type:String,default:"Processing Rules"},type:{type:String,default:"process"},message:{type:String,default:""},rules:{type:Array,default:()=>[]},loading:Boolean,metricLabels:Object,operaterLabels:Object},emits:["update:modelValue","date-change"],setup(t,{emit:k}){const $=k,f=h(!1),p=z(x()),w=p.subtract({days:7}),d=h({start:w,end:p}),V=new F("en-US",{dateStyle:"medium"}),g=r=>r?V.format(r.toDate(x())):"";return D(d,r=>{r?.start&&r?.end&&(f.value=!1)},{deep:!0}),(r,a)=>{const _=R,C=M,B=O,U=A,N=E,P=I,S=T;return e(),v(S,{open:t.modelValue,fullscreen:"","onUpdate:open":a[4]||(a[4]=l=>r.$emit("update:modelValue",l))},{header:c(()=>[n("div",q,[n("h2",G,o(t.title),1),u(_,{size:"sm",variant:"outline",color:"primary",class:"rounded-full p-2",icon:"i-lucide-x",onClick:a[0]||(a[0]=l=>r.$emit("update:modelValue",!1))})])]),body:c(()=>[u(U,{label:"Select Date Range",class:"text-lg font-bold mb-4"},{default:c(()=>[u(B,{open:f.value,"onUpdate:open":a[3]||(a[3]=l=>f.value=l)},{content:c(()=>[u(C,{modelValue:d.value,"onUpdate:modelValue":[a[1]||(a[1]=l=>d.value=l),a[2]||(a[2]=l=>$("date-change",d.value))],range:"","number-of-months":2,class:"p-2"},null,8,["modelValue"])]),default:c(()=>[u(_,{color:"neutral",variant:"subtle",icon:"i-lucide-calendar",size:"lg"},{default:c(()=>[d.value.start?(e(),s(m,{key:0},[d.value.end?(e(),s(m,{key:0},[y(o(g(d.value.start))+" - "+o(g(d.value.end)),1)],64)):(e(),s(m,{key:1},[y(o(g(d.value.start)),1)],64))],64)):(e(),s(m,{key:1},[y(" Pick a date ")],64))]),_:1})]),_:1},8,["open"])]),_:1}),t.loading?(e(),s("div",H,[u(N,{"show-loader":t.loading,size:"md"},null,8,["show-loader"])])):t.rules?.length&&t.type==="process"?(e(),s("div",J,[(e(!0),s(m,null,b(t.rules,l=>(e(),v(P,{key:l.id,class:"rounded-2xl shadow hover:shadow-xl transition-shadow"},{header:c(()=>[n("div",K,o(l.name),1)]),default:c(()=>[n("div",Q,[n("div",W,[a[5]||(a[5]=n("span",{class:"text-gray-500"},"Base Price",-1)),n("span",X,"$"+o(l.base_price),1)]),n("div",Y,[a[6]||(a[6]=n("span",{class:"text-gray-500"},"Net Price",-1)),n("span",Z," $"+o(l.net_price),1)]),l?.rules?.length?(e(),s("div",ee,[a[7]||(a[7]=n("h3",{class:"font-medium mb-2"},"Rules",-1)),n("ul",te,[(e(!0),s(m,null,b(l.rules,(i,j)=>(e(),s("li",{key:j,class:"text-sm border-l-4 pl-2 py-1 border-gray-200"}," If "+o(t.metricLabels[i.rule.metric])+" "+o(t.operaterLabels[i.rule.operator])+" "+o(i.rule.value)+", "+o(i.rule.is_deduction?"Deduction":"Bonus")+" "+o(i.rule.amount)+" "+o(i.rule.amount_type==="fixed"?"dollars":"%")+" ("+o(i.rule.apply_once?"once":"each time")+") ",1))),128))])])):L("",!0)])]),_:2},1024))),128))])):t.type==="check"&&t.message.type==="pdf"?(e(),s("div",se,[n("iframe",{src:t.message.url,class:"w-full h-[80vh] border rounded"},null,8,ae)])):t.type==="check"?(e(),s("div",oe,[t.message?(e(),s("div",le,o(t.message),1)):(e(),s("div",ne," No Checks found. Please add some Checks. "))])):t.type==="deposit"?(e(),s("div",de,[t.message?(e(),s("div",re,o(t.message),1)):(e(),s("div",ce," No Checks found. Please add some Checks. "))])):(e(),s("div",ie," No Rules found. Please add some rules. "))]),_:1},8,["open"])}}};export{_e as _};
