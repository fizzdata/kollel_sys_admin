import{m as J,k as Z,r as u,A as K,z as ee,c as h,o as x,a as e,b as d,w as i,d as _,i as Q,t as U,F as N,h as z,C as q,g as o,a6 as G}from"./CQhMbuYm.js";import{_ as te}from"./D8yCJ5HV.js";import{G as I,F as ae,a as se,H as le}from"./BwspBaMW.js";import{u as X}from"./D9TaRR3o.js";import{b as oe,_ as ne,a as W,c as re}from"./BklFbpMv.js";import{_ as de}from"./CoaxiW6z.js";import{_ as ie}from"./CGvy3zGA.js";import{_ as ue}from"./B3zaNuK4.js";import"./DImwLAFM.js";import"./C-5-UFas.js";import"./Ccy20JML.js";function T(w,k=!0){if(w>0){let m=Math.floor(w/3600);w%=3600;let b=Math.floor(w/60),f=w%60,P=m<12?"AM":"PM",C=m%12||12;return b=String(b).padStart(2,"0"),m=String(m).padStart(2,"0"),f=String(f).padStart(2,"0"),k===!0?C+":"+b+":"+f+" "+P:m+":"+b+":"+f}else return"-"}const ce={class:"calendar"},fe={class:"flex justify-between mb-4"},me={class:"text-3xl font-bold text-gray-900"},pe={class:"w-full border-collapse table-auto"},ge={class:"h-16 flex flex-col items-center text-sm"},ye={key:0,class:"flex flex-col"},be={class:"mt-2 text-sm bg-yellow-200 p-1 rounded"},ve=["textContent"],_e=["innerHTML"],he=["innerHTML"],xe={__name:"ScheduleCalender",props:{schedules:{type:Object,default:()=>({})}},emits:["edit_clicked","reload","year_month"],setup(w,{emit:k}){const m=w,b=k,f=J({id:"",day:"",start:"",end:""}),P=X(),C=Z(),j=O(new Date),c=u(j.year),p=u(j.month),M=u(!1),$=u([]),g=["×ª×©×¨×™","×—×©×•×Ÿ","×›×¡×œ×•","×˜×‘×ª","×©×‘×˜","××“×¨ ×'","××“×¨ ×‘'","× ×™×¡×Ÿ","××™×™×¨","×¡×™×•×Ÿ","×ª×ž×•×–","××‘","××œ×•×œ"];function S(l){return l.toISOString().split("T")[0]}function O(l){const[t,r,v]=S(l).split("-"),s=I(t,r,v).split("/");return{month:Number(s[0]),day:Number(s[1]),year:s[2]}}function H(){return le(c.value,p.value,1)}function B(){return`${g[p.value-1]} ${ae(c.value)}`}function E(l){return Object.values(m.schedules).find(t=>t.day===l)||null}function F(){const l=H(),t=[];let r=[];const v=I(l.getFullYear(),l.getMonth()+1,l.getDate()).split("/")[0];let s=new Date(l);for(let y=0;y<l.getDay();y++)r.push({date:null,data:null});for(;;){const y=S(s);if(r.push({date:{string:y,current:new Date(s)},data:E(y)}),s.setDate(s.getDate()+1),r.length===7&&(t.push(r),r=[]),I(s.getFullYear(),s.getMonth()+1,s.getDate()).split("/")[0]!==v){if(r.length){for(;r.length<7;)r.push({date:null,data:null});t.push(r)}break}}$.value=t}function n(){const l=S(H()),t=H();t.setDate(t.getDate()+29),b("year_month",{from:l,to:S(t)})}function a(){p.value===1?(p.value=13,c.value=String(Number(c.value)-1)):p.value--,n(),F()}function D(){p.value===13?(p.value=1,c.value=String(Number(c.value)+1)):p.value++,n(),F()}function L(l){const[t,r,v]=l.split("-");return se(t,r,v)}function Y(l){f.id=l.id,f.day=l.day,f.start=T(l.start,!1),f.end=T(l.end,!1),b("edit_clicked",f)}async function A(l){M.value=!0;try{const t=await P(`/api/schedules/destroy/${l}`,{method:"DELETE"});t?.success?(C.add({title:"Success",description:t?.message||"Schedule Deleted Successfully",color:"success",duration:2e3}),b("reload")):C.add({title:"Failed",description:t?._data.errors||t?._data.message||"Failed to delete Rules",color:"error",duration:2e3})}catch(t){console.error("Error deleting Rules:",t)}finally{M.value=!1}}return K(F),ee(()=>m.schedules,()=>F(),{deep:!0}),(l,t)=>{const r=Q;return x(),h("div",ce,[e("div",fe,[d(r,{onClick:a,icon:"i-lucide-arrow-left",color:"primary",variant:"solid"},{default:i(()=>[...t[0]||(t[0]=[_("Previous",-1)])]),_:1}),e("h2",me,U(B()),1),d(r,{onClick:D,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"solid"},{default:i(()=>[...t[1]||(t[1]=[_(" Next ",-1)])]),_:1})]),e("table",pe,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"bg-gray-200"}),e("tr",{class:"bg-gray-200"},[e("th",{class:"p-2 border border-gray-300"},"×–×•× ×˜××’"),e("th",{class:"p-2 border border-gray-300"},"×ž×× ×˜××’"),e("th",{class:"p-2 border border-gray-300"},"×“×™× ×¡×˜××’"),e("th",{class:"p-2 border border-gray-300"},"×ž×™×˜×•×•××š"),e("th",{class:"p-2 border border-gray-300"},"×“×× ×¢×¨×©×˜××’"),e("th",{class:"p-2 border border-gray-300"},"×¤×¨×™×™×˜××’"),e("th",{class:"p-2 border border-gray-300"},"×©×‘×ª ×§×•×“×©")])],-1)),e("tbody",null,[(x(!0),h(N,null,z(o($),v=>(x(),h("tr",{key:v[0]?.date},[(x(!0),h(N,null,z(v,s=>(x(),h("td",{key:s?.date,class:"p-2 border border-gray-300 whitespace-normal"},[e("div",ge,[s?.date?(x(),h("span",ye,[_(U(L(s.date.string))+" ",1),e("small",null,"("+U(s.date.string)+")",1)])):q("",!0)]),s?.data?(x(!0),h(N,{key:0},z(s.data.schedule,y=>(x(),h("div",be,[t[2]||(t[2]=_(" Seder ",-1)),e("span",{textContent:U(y.session)},null,8,ve),t[3]||(t[3]=_(": ",-1)),e("span",{innerHTML:o(T)(y.start)},null,8,_e),t[4]||(t[4]=_(" - ",-1)),e("span",{innerHTML:o(T)(y.end)},null,8,he),d(r,{color:"success",variant:"soft",class:"mt-4",icon:"i-lucide-square-pen",onClick:R=>Y(y)},null,8,["onClick"]),d(r,{color:"error",variant:"soft",icon:"i-lucide-trash-2",class:"mt-4",disabled:o(M),onClick:R=>A(y.id)},null,8,["disabled","onClick"])]))),256)):q("",!0)]))),128))]))),128))])])])}}},we={class:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-4 md:mb-0"},Me={class:"flex justify-end gap-2"},Se={class:"flex justify-between w-full"},De={class:"max-w-4xl mx-auto space-y-8"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"flex justify-end items-center gap-2 mt-4 border-t border-gray-200 pt-4"},Be={__name:"index",setup(w){const k=new oe("en-US",{dateStyle:"medium"}),m=u([]),b=u(!1),f=u({}),P=u(!1),C=X(),V=u(H()),j=u(O()),c=u(!1),p=u(!1),M=u(!1),$=u(!1),g=J({from_date:null,to_date:null});async function S(){P.value=!0;try{const n=await C(`/api/schedules?date_from=${V.value}&date_to=${j.value}`);n?.success&&(m.value=n?.schedules||[])}catch(n){console.log("ðŸš€ ~ fetchStudents ~ err:",n)}finally{P.value=!1}}function O(){const n=new Date;return n.setDate(n.getDate()+30),n.toISOString().slice(0,10)}function H(){const n=new Date;return n.setDate(n.getDate()-30),n.toISOString().slice(0,10)}function B({from:n,to:a}){V.value=n,j.value=a,S()}function E(n){f.value=n,b.value=!0}const F=n=>{console.log("ðŸš€ ~ handlePopulateScheduleSubmit ~ event:",n.data)};return K(async()=>{await S()}),(n,a)=>{const D=Q,L=te,Y=xe,A=re,l=ne,t=de,r=ie,v=ue;return x(),h(N,null,[e("div",null,[d(L,{class:"rounded-2xl shadow-sm mb-4"},{default:i(()=>[e("div",we,[a[10]||(a[10]=e("h2",{class:"text-xl font-bold"},"Schedules",-1)),e("div",Me,[d(D,{onClick:a[0]||(a[0]=s=>c.value=!0),trailingIcon:"i-lucide-arrow-right",label:" Populate default schedule"})])])]),_:1}),d(Y,{schedules:o(m),onEdit_clicked:E,onReload:S,onYear_month:B},null,8,["schedules"])]),d(v,{open:o(c),"onUpdate:open":a[9]||(a[9]=s=>G(c)?c.value=s:null),ui:{fullscreen:{false:{content:"w-3xl max-w-4xl rounded-lg shadow-lg ring ring-default"}}}},{header:i(()=>[e("div",Se,[a[11]||(a[11]=e("h2",{class:"text-xl font-bold text-primary"},"Fill the schedule",-1)),d(D,{size:"sm",variant:"outline",color:"primary",class:"rounded-full p-2",icon:"i-lucide-x",onClick:a[1]||(a[1]=s=>c.value=!1)})])]),body:i(()=>[e("div",De,[a[14]||(a[14]=e("div",null,[e("h2",{class:"text-2xl font-bold mb-6 text-gray-800"}," Default Schedule "),e("div",{class:"space-y-3"},[e("div",{class:"flex justify-between items-start bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("span",{class:"font-semibold text-gray-700 w-32"},"Sunday"),e("div",{class:"text-gray-600 text-sm space-y-1 text-right"},[e("div",null,"10:00 AM â€“ 02:00 PM"),e("div",null,"03:00 PM â€“ 06:00 PM")])]),e("div",{class:"flex justify-between items-start bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("span",{class:"font-semibold text-gray-700 w-32"},"Monday"),e("div",{class:"text-gray-600 text-sm space-y-1 text-right"},[e("div",null,"10:00 AM â€“ 02:00 PM"),e("div",null,"03:00 PM â€“ 06:00 PM")])]),e("div",{class:"flex justify-between items-start bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("span",{class:"font-semibold text-gray-700 w-32"},"Tuesday"),e("div",{class:"text-gray-600 text-sm space-y-1 text-right"},[e("div",null,"10:00 AM â€“ 02:00 PM"),e("div",null,"03:00 PM â€“ 06:00 PM")])]),e("div",{class:"flex justify-between items-start bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("span",{class:"font-semibold text-gray-700 w-32"},"Wednesday"),e("div",{class:"text-gray-600 text-sm space-y-1 text-right"},[e("div",null,"10:00 AM â€“ 02:00 PM"),e("div",null,"03:00 PM â€“ 06:00 PM")])]),e("div",{class:"flex justify-between items-start bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("span",{class:"font-semibold text-gray-700 w-32"},"Friday"),e("div",{class:"text-gray-600 text-sm space-y-1 text-right"},[e("div",null,"01:25 AM â€“ 12:12 PM"),e("div",null,"12:00 AM â€“ 12:00 AM")])])])],-1)),d(r,{state:o(g),class:"space-y-4 bg-gray-50 p-6 rounded-xl shadow",onSubmit:F},{default:i(()=>[e("div",$e,[d(t,{label:"From Date",name:"day"},{default:i(()=>[d(l,{class:"w-full",open:o(M),"onUpdate:open":a[4]||(a[4]=s=>G(M)?M.value=s:null)},{content:i(()=>[d(A,{modelValue:o(g).from_date,"onUpdate:modelValue":[a[2]||(a[2]=s=>o(g).from_date=s),a[3]||(a[3]=s=>M.value=!1)],class:"p-2"},null,8,["modelValue"])]),default:i(()=>[d(D,{color:"neutral",variant:"outline",icon:"i-lucide-calendar",size:"lg",class:"w-full text-left"},{default:i(()=>[_(U(o(g)?.from_date?o(k).format(o(g)?.from_date.toDate(o(W)())):"Select a date"),1)]),_:1})]),_:1},8,["open"])]),_:1}),d(t,{label:"To Date",name:"day"},{default:i(()=>[d(l,{class:"w-full",open:o($),"onUpdate:open":a[7]||(a[7]=s=>G($)?$.value=s:null)},{content:i(()=>[d(A,{modelValue:o(g).to_date,"onUpdate:modelValue":[a[5]||(a[5]=s=>o(g).to_date=s),a[6]||(a[6]=s=>$.value=!1)],class:"p-2"},null,8,["modelValue"])]),default:i(()=>[d(D,{color:"neutral",variant:"outline",icon:"i-lucide-calendar",size:"lg",class:"w-full text-left"},{default:i(()=>[_(U(o(g)?.to_date?o(k).format(o(g)?.to_date.toDate(o(W)())):"Select a date"),1)]),_:1})]),_:1},8,["open"])]),_:1})]),e("div",ke,[d(D,{color:"neutral",variant:"solid",onClick:a[8]||(a[8]=s=>c.value=!1)},{default:i(()=>[...a[12]||(a[12]=[_(" Cancel ",-1)])]),_:1}),d(D,{type:"submit",loading:o(p),disabled:o(p)},{default:i(()=>[...a[13]||(a[13]=[_(" Set Schedule ",-1)])]),_:1},8,["loading","disabled"])])]),_:1},8,["state"])])]),_:1},8,["open"])],64)}}};export{Be as default};
