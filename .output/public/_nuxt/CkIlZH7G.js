import{r as y,k as L,l as q,m as B,c as C,a as o,b as t,w as a,o as E,n as N,g as s,i as P,d as m}from"./CQhMbuYm.js";import{_ as T}from"./Caw1bJKe.js";import{_ as A}from"./CoaxiW6z.js";import{_ as I}from"./CGvy3zGA.js";import{_ as R}from"./D8yCJ5HV.js";import{c as j,a as b}from"./CfhmW9is.js";import{u as D}from"./D9TaRR3o.js";import{u as d}from"./DImwLAFM.js";import"./Ccy20JML.js";const H={class:"relative flex min-h-screen items-center justify-center bg-gray-50 px-4"},K={class:"mb-6 text-center"},M={class:"mt-8 text-center text-sm text-gray-500"},te={__name:"login",setup(O){const i=y(!1),x=D(),c=L(),n=y(!1),w=q(),v=d("kollel_sys_token"),k=d("kollel_sys_org"),S=d("kollel_sys_user"),$=d("kollel_sys_has_access"),h=j({email:b().email("Invalid email").required("Email is required"),password:b().min(8,"Must be at least 8 characters").required("Password is required")}),l=B({email:void 0,password:void 0}),V=()=>{l.email=void 0,l.password=void 0},U=async p=>{try{n.value=!0;const e=await x("/api/login",{method:"POST",body:p.data});e?.success?(v.value=e?.access_token||"",k.value=e?.org||null,S.value=e?.user||null,$.value=e?.has_access||[],w.push(`/${e?.has_access[0]}`),V(),c.add({title:"Success",description:e?.message||"Login Successfully",color:"success",duration:2e3})):c.add({title:"Failed",description:e?._data.errors||e?._data.message||"Failed to Login",color:"error",duration:2e3})}catch(e){console.error("Error Login:",e)}finally{n.value=!1}};return(p,e)=>{const u=N,f=T,_=A,g=P,z=I,F=R;return E(),C("div",H,[e[9]||(e[9]=o("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[o("div",{class:"absolute -top-40 -left-40 w-64 h-64 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-pulse-slow"}),o("div",{class:"absolute -bottom-40 -right-40 w-64 h-64 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-pulse-slow animation-delay-2000"})],-1)),t(F,{class:"w-full max-w-lg rounded-2xl shadow-xl p-6 sm:p-8"},{default:a(()=>[o("div",K,[t(u,{to:"/"},{default:a(()=>[...e[3]||(e[3]=[o("h2",{class:"text-3xl font-bold text-primary"},"Kollel System",-1)])]),_:1}),t(u,{to:"http://fizzdata.com/",target:"_blank",class:"block"},{default:a(()=>[...e[4]||(e[4]=[o("p",{class:"mt-1 text-sm text-gray-500"},"by Fizz Data",-1)])]),_:1})]),e[8]||(e[8]=o("p",{class:"my-6 text-center text-lg font-medium text-gray-800"}," Login to your account ",-1)),t(z,{schema:s(h),state:s(l),class:"space-y-4",onSubmit:U},{default:a(()=>[t(_,{label:"Email",name:"email"},{default:a(()=>[t(f,{modelValue:s(l).email,"onUpdate:modelValue":e[0]||(e[0]=r=>s(l).email=r),placeholder:"you@example.com",size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(_,{label:"Password",name:"password"},{default:a(()=>[t(f,{modelValue:s(l).password,"onUpdate:modelValue":e[2]||(e[2]=r=>s(l).password=r),placeholder:"Password",type:s(i)?"text":"password",ui:{trailing:"pe-1"},class:"w-full"},{trailing:a(()=>[t(g,{color:"neutral",variant:"link",size:"sm",icon:s(i)?"i-lucide-eye-off":"i-lucide-eye","aria-label":s(i)?"Hide password":"Show password","aria-pressed":s(i),"aria-controls":"password",onClick:e[1]||(e[1]=r=>i.value=!s(i))},null,8,["icon","aria-label","aria-pressed"])]),_:1},8,["modelValue","type"])]),_:1}),t(g,{type:"submit",loading:s(n),disabled:s(n),block:"",size:"lg"},{default:a(()=>[...e[5]||(e[5]=[m(" Submit ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["schema","state"]),o("p",M,[e[7]||(e[7]=m(" Not an account? ",-1)),t(u,{to:"/signup",class:"font-semibold text-primary hover:text-gray-500"},{default:a(()=>[...e[6]||(e[6]=[m(" Sign up! ",-1)])]),_:1})])]),_:1})])}}};export{te as default};
