import{r as g,k as S,l as C,m as E,c as F,a as r,b as a,w as o,o as N,n as A,g as s,i as B,d as w}from"./CQhMbuYm.js";import{_ as I}from"./Caw1bJKe.js";import{_ as L}from"./CoaxiW6z.js";import{_ as O}from"./CGvy3zGA.js";import{_ as T}from"./D8yCJ5HV.js";import{c as H,a as m,b as j}from"./CfhmW9is.js";import{u as D}from"./D9TaRR3o.js";import{u as c}from"./DImwLAFM.js";import"./Ccy20JML.js";const K={class:"relative flex min-h-screen items-center justify-center bg-gray-50 px-4"},R={class:"mb-6 text-center"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"mt-8 text-center text-sm text-gray-500"},le={__name:"signup",setup(J){const n=g(!1),i=g(!1),y=S(),x=D(),p=g(!1),v=C(),V=c("kollel_sys_token"),h=c("kollel_sys_org"),k=c("kollel_sys_user"),$=c("kollel_sys_has_access"),P=H({name:m().matches(/^[a-zA-Z\s]+$/,"Invalid name").required("Name is required"),email:m().email("Invalid email").required("Email is required"),phone:m().matches(/^\+?[0-9]{7,15}$/,"Invalid phone number").required("Phone is required"),password:m().min(6,"Password must be at least 6 characters").required("Password is required"),password_confirmation:m().oneOf([j("password")],"Passwords must match").required("Confirm Password is required"),org_pin:m().required("Org Pin is required")}),l=E({name:void 0,email:void 0,phone:void 0,password:void 0,password_confirmation:void 0,org_pin:void 0});async function U(b){try{p.value=!0;const e=await x("/api/register",{method:"POST",body:b.data});e?.success?(V.value=e?.access_token||"",h.value=e?.org||null,k.value=e?.user||null,$.value=e?.has_access||[],v.push(`/${e?.has_access[0]}`),y.add({title:"Success",description:e?.message||"Signup Successfully",color:"success",duration:2e3})):y.add({title:"Failed",description:e?._data.errors||e?._data.message||"Failed to Login",color:"error",duration:2e3})}catch(e){console.error("Error Login:",e)}finally{p.value=!1}}return(b,e)=>{const f=A,d=I,u=L,_=B,q=O,z=T;return N(),F("div",K,[e[14]||(e[14]=r("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[r("div",{class:"absolute -top-40 -left-40 w-64 h-64 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-pulse-slow"}),r("div",{class:"absolute -bottom-40 -right-40 w-64 h-64 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-pulse-slow animation-delay-2000"})],-1)),a(z,{class:"w-full max-w-xl rounded-2xl shadow-xl py-6 sm:py-8"},{default:o(()=>[r("div",R,[a(f,{to:"/"},{default:o(()=>[...e[8]||(e[8]=[r("h2",{class:"text-3xl font-bold text-primary"},"Kollel System",-1)])]),_:1}),a(f,{to:"http://fizzdata.com/",target:"_blank",class:"block"},{default:o(()=>[...e[9]||(e[9]=[r("p",{class:"mt-1 text-sm text-gray-500"},"by Fizz Data",-1)])]),_:1})]),e[13]||(e[13]=r("p",{class:"my-6 text-center text-lg font-medium text-gray-800"}," Sign Up your account ",-1)),a(q,{schema:s(P),state:s(l),class:"space-y-4",onSubmit:U},{default:o(()=>[r("div",Z,[a(u,{label:"Name",name:"name"},{default:o(()=>[a(d,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=t=>s(l).name=t),placeholder:"Enter your name",size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),a(u,{label:"Email",name:"email"},{default:o(()=>[a(d,{modelValue:s(l).email,"onUpdate:modelValue":e[1]||(e[1]=t=>s(l).email=t),placeholder:"Enter your email",size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),a(u,{label:"Phone",name:"phone"},{default:o(()=>[a(d,{modelValue:s(l).phone,"onUpdate:modelValue":e[2]||(e[2]=t=>s(l).phone=t),placeholder:"Enter your phone",size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),a(u,{label:"Org Pin",name:"org_pin"},{default:o(()=>[a(d,{modelValue:s(l).org_pin,"onUpdate:modelValue":e[3]||(e[3]=t=>s(l).org_pin=t),placeholder:"Enter your org pin",size:"lg",class:"w-full",type:"number"},null,8,["modelValue"])]),_:1}),a(u,{label:"Password",name:"password"},{default:o(()=>[a(d,{modelValue:s(l).password,"onUpdate:modelValue":e[5]||(e[5]=t=>s(l).password=t),placeholder:"Password",type:s(n)?"text":"password",ui:{trailing:"pe-1"},class:"w-full"},{trailing:o(()=>[a(_,{color:"neutral",variant:"link",size:"sm",icon:s(n)?"i-lucide-eye-off":"i-lucide-eye","aria-label":s(n)?"Hide password":"Show password","aria-pressed":s(n),"aria-controls":"password",onClick:e[4]||(e[4]=t=>n.value=!s(n))},null,8,["icon","aria-label","aria-pressed"])]),_:1},8,["modelValue","type"])]),_:1}),a(u,{label:"Password Confirmation",name:"password_confirmation"},{default:o(()=>[a(d,{modelValue:s(l).password_confirmation,"onUpdate:modelValue":e[7]||(e[7]=t=>s(l).password_confirmation=t),placeholder:"Password Confirmation",type:s(i)?"text":"password",ui:{trailing:"pe-1"},class:"w-full"},{trailing:o(()=>[a(_,{color:"neutral",variant:"link",size:"sm",icon:s(i)?"i-lucide-eye-off":"i-lucide-eye","aria-label":s(i)?"Hide password":"Show password","aria-pressed":s(i),"aria-controls":"password",onClick:e[6]||(e[6]=t=>i.value=!s(i))},null,8,["icon","aria-label","aria-pressed"])]),_:1},8,["modelValue","type"])]),_:1})]),a(_,{type:"submit",loading:s(p),disabled:s(p),block:"",size:"lg"},{default:o(()=>[...e[10]||(e[10]=[w(" Submit ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["schema","state"]),r("p",G,[e[12]||(e[12]=w(" Already have an account? ",-1)),a(f,{to:"/login",class:"font-semibold text-primary hover:text-gray-500"},{default:o(()=>[...e[11]||(e[11]=[w(" Login! ",-1)])]),_:1})])]),_:1})])}}};export{le as default};
